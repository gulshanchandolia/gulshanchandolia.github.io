<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>
        <input type="text" placeholder="Enter mobile phone number" id="mobile_phone" />
        <button onclick="person_dob(document.getElementById('mobile_phone').value)" id="confirm">Submit</button>
    </div> 
    <script type="text/javascript"> 
        function person_dob(number){
            var myHeaders = new Headers();
            myHeaders.append("accept", "application/json, text/plain, /");
            myHeaders.append("accept-encoding", "gzip, deflate, br");
            myHeaders.append("accept-language", "en-US,en;q=0.9");
            myHeaders.append("authorization", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjo2MjI3ODcsInVzZXJfbmFtZSI6IjkzMTQzNzAxMTMiLCJkaXNwbGF5X25hbWUiOiJTVUJJVEEgS1VNQVJJIiwicm9sZSI6NywibW9iaWxlX251bWJlciI6OTMxNDM3MDExMywiY291bnRyeV9pZCI6MSwic3RhdGVfaWQiOjI5LCJkaXN0cmljdF9pZCI6NTAxLCJibG9ja19pZCI6MjgxNCwiZmFjaWxpdHlfaWQiOjEzMTg5LCJ1c2VyX2xldmVsIjoiRmFjaWxpdHkiLCJtaW5pc3RyeV9pZCI6MTEsInN1Yl9jYXRlZ29yeV9pZCI6IltcIlwiXSIsImluc3RpdHV0aW9uX2lkIjpudWxsLCJ1c2VyX3JvbGVfZGVzY3JpcHRpb24iOiJWYWNjaW5hdG9yIiwicm9sZU1vZGlmaWVkRGF0ZSI6IjIwMjAtMTEtMDlUMjA6MzM6MzMuMDAwWiIsImlzU3VwZXJ2aXNvciI6MCwidWEiOiJNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgNi4wOyBOZXh1cyA1IEJ1aWxkL01SQTU4TikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEwNS4wLjAuMCBNb2JpbGUgU2FmYXJpLzUzNy4zNiIsImRhdGVfbW9kaWZpZWQiOiIyMDIyLTA5LTEyVDE3OjExOjI5LjUwM1oiLCJzZXNzaW9uX3NpdGVfaWQiOjY0NTM1NiwibWF0ZXJpYWxfaWQiOm51bGwsImNvbnNpZ25tZW50X2lkIjpudWxsLCJzb3VyY2UiOm51bGwsInN1Yl9jZW50ZXJfaWQiOm51bGwsImlhdCI6MTY2MzAwMjY4OSwiZXhwIjoxNjYzMDMxNDg5fQ.p94z_xiAs_BKyRBVWCLsJ-P0opBA7Dveic6XLwpMK_0");
            myHeaders.append("content-length", "61");
            myHeaders.append("content-type", "application/json");
            myHeaders.append("origin", "https://app.cowin.gov.in");
            myHeaders.append("referer", "https://app.cowin.gov.in/");
            myHeaders.append("sec-ch-ua", "\"Google Chrome\";v=\"105\", \"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"105\"");
            myHeaders.append("sec-ch-ua-mobile", "?1");
            myHeaders.append("sec-ch-ua-platform", "\"Android\"");
            myHeaders.append("sec-fetch-dest", "empty");
            myHeaders.append("sec-fetch-mode", "cors");
            myHeaders.append("sec-fetch-site", "same-site");
            myHeaders.append("user-agent", "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Mobile Safari/537.36");

            var raw = JSON.stringify({
            "search_value": number,
            "flag": 0,
            "precaution_dose": true
            });

            var requestOptions = {
            method: 'POST',
            headers: myHeaders,
            body: raw,
            redirect: 'follow'
            };

            fetch("https://api.cowin.gov.in/api/v1/registration/beneficiary/v2/getBeneficiaries", requestOptions)
            .then(response => response.text())
            .then(result => {
                let data = JSON.parse(result)
                    if(data.length){
                        for (let inx in data){
                            let name = data[inx].ben_name
                            let dob = data[inx].dob
                            console.log("NAME: ",name, " DOB: ", dob)
                        }
                    }            
                            })
            .catch(error => console.log('error', error));
        }
    </script>
</body>
</html>